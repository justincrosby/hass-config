platform: template
sensors:
  media_volume:
    value_template: >
      {% if is_state("sensor.media_source", "CastAudio") %}
        {% if is_state("media_player.home_audio", "off") %}
          0
        {% else %}
          {{ (state_attr("media_player.home_audio", "volume_level") * 100)|int }}
        {% endif %}
      {% else %}
        {% if is_state("media_player.denon_avr_x1300w", "off") %}
          0
        {% else %}
          {{ (state_attr("media_player.denon_avr_x1300w", "volume_level") * 100)|int }}
        {% endif %}
      {% endif %}
    friendly_name: 'Media Volume'
