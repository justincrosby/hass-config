platform: template
sensors:
  media_source:
    value_template: >
      {% if is_state("media_player.denon_avr_x1300w", "off") %}
        {% if is_state("sensor.media_status", "playing") %}
          Cast Audio
        {% else %}
          Shutdown
        {% endif %}
      {% elif state_attr("media_player.denon_avr_x1300w", "source") == 'CastAudio' %}
        Cast Audio
      {% elif state_attr("media_player.denon_avr_x1300w", "source") == 'Shield' %}
        Shield
      {% elif state_attr("media_player.denon_avr_x1300w", "source") == 'PS3' %}
        PS3
      {% elif state_attr("media_player.denon_avr_x1300w", "source") == 'RecordPlayer' %}
        Record Player
      {% elif state_attr("media_player.denon_avr_x1300w", "source") == 'NUC' %}
        Steam
      {% elif state_attr("media_player.denon_avr_x1300w", "source") == 'Switch' %}
        Switch
      {% elif state_attr("media_player.denon_avr_x1300w", "source") == 'WiiU' %}
        WiiU
      {% else %}
        Shutdown
      {% endif %}
    friendly_name: 'Media Source'
  home_audio_app:
    entity_id:
      - sensor.media_output
      - media_player.home_audio
      - media_player.fake_home_audio
      - media_player.master_suite_audio
      - media_player.master_bedroom_audio
    value_template: >
      {% if is_state("sensor.media_output", "unknown") %}
        Default Media Receiver
      {% else %}
        {{ state_attr(states("sensor.media_output"), "app_name") }}
      {% endif %}
    friendly_name: 'Home Audio App'
  media_output:
    value_template: >
      {% if is_state("input_select.media_output_select", "Home Audio") %}
        media_player.home_audio
      {% elif is_state("input_select.media_output_select", "Fake Home Audio") %}
        media_player.fake_home_audio
      {% elif is_state("input_select.media_output_select", "Master Suite Audio") %}
        media_player.master_suite_audio
      {% elif is_state("input_select.media_output_select", "Bedroom Audio") %}
        media_player.master_bedroom_audio
      {% else %}
        media_player.home_audio
      {% endif %}
    friendly_name: 'Media Output'
  media_status:
    entity_id:
      - sensor.media_output
      - media_player.home_audio
      - media_player.fake_home_audio
      - media_player.master_suite_audio
      - media_player.master_bedroom_audio
    value_template: >
      {% if is_state("sensor.media_output", "unknown") %}
        off
      {% else %}
        {{ states(states("sensor.media_output")) }}
      {% endif %}
    friendly_name: 'Media Status'